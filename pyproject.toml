[dependency-groups]
shared = ["mcp"]
dev = ["pytest>=8.3.5", "aiosqlite>=0.21.0"]
test = [
  "hypothesis>=6.130.2",
  "httpx>=0.28.1",
  "coverage",
  "pytest",
  "pytest-asyncio",
  "pytest-anyio",
  "pytest-xdist",
  "pytest-mock",
  "pytest-cov",
  "pytest-sugar",
  "pytest-sqlalchemy>=0.2.1",
  "pytest-databases[redis]>=0.1.0",
  "pytest-timeout>=2.3.1",
  "tabulate>=0.9.0",
]

[tool.uv.workspace]
members = ["libs/*", "services/*", "mcp-server"]

[tool.ruff]
line-length = 120
fix = true
lint.fixable = ["ALL"]
src = ["libs/**/*", "services/**/*"]
target-version = "py312"
extend-exclude = ["**/migrations"]

[tool.pytest.ini_options]
log_cli = true
log_cli_level = "INFO"
log_cli_format = "%(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)"
log_cli_date_format = "%Y-%m-%d %H:%M:%S"

timeout = 60
testpaths = ["**/tests"]
addopts = ["-ra", "--ignore", "migrations"]
filterwarnings = [
  "ignore::DeprecationWarning:pkg_resources",
  "ignore::DeprecationWarning:google.*",
  "ignore::DeprecationWarning:passlib.*",
  "ignore::DeprecationWarning:aiosql.*",
  "ignore::DeprecationWarning:litestar.constants.*",
  "ignore::DeprecationWarning:litestar.utils.*",
  "ignore::DeprecationWarning:litestar.cli.*",
  "ignore::DeprecationWarning:httpx._client",
]
